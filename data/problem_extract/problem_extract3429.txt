undirected,tree,nn,nodes,positive,weight,wiwi,assigned,node,ii,1≤i≤n1≤i≤n,1≤j≤n−11≤j≤n−1,jj-th,edge,connects,nodes,ujuj,vjvj,restriction,rjrj,array,a1a2⋯ana1a2⋯an,consisting,nn,non-negative,integers,called,valid,1≤j≤n−11≤j≤n−1,condition,auj+avj≤rjauj+avj≤rj,holds,profit,valid,array,aa,defined,profita=∑i=1nai⋅wiprofita=∑i=1nai⋅wi,find,maximum,profitaprofita,valid,array,aa,input,format,line,input,single,integer,tt,-,number,test,cases,description,tt,test,cases,follow,line,test,case,single,integer,nn,-,number,nodes,tree,line,test,case,nn,integers,w1w2⋯wnw1w2⋯wn,denoting,weights,assigned,node,n−1n−1,lines,space-separated,integers,jj-th,line,ujuj,vjvj,rjrj,output,format,test,case,output,maximum,profitaprofita,constraints,1≤t≤1051≤t≤105,3≤n≤1053≤n≤105,1≤wi≤1091≤wi≤109,1≤ujvj≤n1≤ujvj≤n,uj≠vjuj≠vj,1≤rj≤1091≤rj≤109,guaranteed,n⋅maxni=1wi⋅maxn−1j=1rj≤1018n⋅maxi=1nwi⋅maxj=1n−1rj≤1018,guaranteed,input,forms,valid,tree,test,cases,sum,nn,test,cases,exceed,sample,input,sample,output,explanation,test,case-1,valid,arrays,aa,a=[000]a=[000],profita=0⋅6+0⋅9+0⋅4=0profita=0⋅6+0⋅9+0⋅4=0,a=[001]a=[001],profita=0⋅6+0⋅9+1⋅4=4profita=0⋅6+0⋅9+1⋅4=4,a=[010]a=[010],profita=0⋅6+1⋅9+0⋅4=9profita=0⋅6+1⋅9+0⋅4=9,a=[101]a=[101],profita=1⋅6+0⋅9+1⋅4=10profita=1⋅6+0⋅9+1⋅4=10,a=[110]a=[110],profita=1⋅6+1⋅9+0⋅4=15profita=1⋅6+1⋅9+0⋅4=15,a=[201]a=[201],profita=2⋅6+0⋅9+1⋅4=16profita=2⋅6+0⋅9+1⋅4=16,maximum,profit,valid,arrays,aa,answer,test,case-2,optimal,aa,[900314][900314],test,case-3,optimal,aa,[03000000000][03000000000],author,1★arvindf232,editorial,https://discuss.codechef.com/problems/TANGLINGTREE,tags,arvindf232,cook138,dynamic-programming,medium-hard,slope-trick,small-to-large,difficulty,rating,date,added,20-02-2022,time,limit,secs,source,limit,bytes,languages,cpp17,pyth,java,cpp14,pyth,pyp3,cs2,ada,pypy,text,pas,fpc,nodejs,ruby,php,hask,tcl,kotlin,perl,scala,lua,bash,js,rust,lisp,sbcl,pas,gpc,bf,cloj,caml,swift,fort,asm,fs,wspc,lisp,clisp,sql,scm,guile,perl6,erl,clps,prlg,sqlq,ick,nice,icon,cob,scm,chicken,pike,scm,qobi,st,nem,submit